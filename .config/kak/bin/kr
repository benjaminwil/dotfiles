#!/bin/sh

. _kinit

initial_directory="${1}"

if [ "$initial_directory" = . ]
then
    selection="$(nnn -C -p -)"
else
    selection="$(nnn -C -p - "$initial_directory")"
fi

printf "evaluate-commands -try-client $KAKOUNE_CLIENT -verbatim -- edit! '$selection'" | \
    kak -p $KAKOUNE_SESSION
